---
templateKey: blog-post
title: React18에서 Nextjs13로 이관기 +Typescript
date: 2023-08-28T13:30:29.366Z
featuredpost: false
featuredimage: https://res.cloudinary.com/dftuawd1d/image/upload/f_auto,q_auto/c_fit,h_400,w_600/v1675433466/harang/confetti_kqweo8.webp
tags:
  - 테스트
---
기존 코드베이스는 CRA로 생성한 React 16과 Sass로 작성하였습니다. SEO를 위해서 Nextjs13 및 Typescript로 이전하려고 합니다.
우선 사전 작업으로 React 16에서 18로 버전 업그레이드를 진행했습니다.

# Nextjs 및 Typescript 설치하기

```shell
npm i next@latest @types/node @types/react @types/react-dom typescript
```

# 불필요 패키지 삭제하기

불필요해진 패키지는 삭제합니다. react-router-dom에서 임포트하여 사용한 Link가 있다면 next/link의 Link로 교체해줍니다.

```shell
npm uninstall react-script react-router-dom

// 해당 프로젝트에 해당하는 의존성
npm uninstall react-helmet
```

# 타입스크립트 관련 파일 추가

tsconfig.json
next-env.d.ts

환경변수 이름 바꾸기

REACT\_APP\_ ->NEXT_PUBLIC

# Sass 트러블 슈팅

기존 코드베이스는 Sas + BEM 방식으로 작성되서 CSS가 글로벌 레벨에서 동작합니다. 그런데 컴포넌트에서 임포트한 scss 파일이 문제가 되었습니다. Next에서는 충돌과 사이드 이펙트를 방지하기 위해서, pages/_app.jsx 이외 파일에서 글로벌 레벨의 CSS를 임포트하는 것을 허락하지 않는다고 합니다.

이를 해결하려면 모든 글로벌 레벨의 CSS를 pages/_app.jsx에 임포트하거나, CSS Module을 사용해서 각 컴포넌트에서 해당 CSS를 임포트해서 사용해야 합니다. Sass를 계속 사용한다면 두번 째 방식이 더 적절해 보입니다.

![Global CSS cannot be imported from files other than your Custom <App>](https://res.cloudinary.com/dftuawd1d/image/upload/v1693621272/blog/Screenshot_2023-09-02_at_11.20.56_AM_x7vqep.png)

모듈로 임포트한 CSS 클래스명을 합성하기 위해서 \`clsx\`라는 라이브러리르 추가로 설치했습니다.

\`\``

// AS-IS

className="alert success"

// TO-BE

className={clsx(styles.alert, styles.success)}

\`\``

## react-router-dom -> next/link